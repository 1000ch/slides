<!doctype html>
<html>
  <head>
    <title>Web Components 2016 & Polymer v2</title>
    <link rel="stylesheet" href="../node_modules/talkiejs/dist/talkie.min.css">
    <link rel="stylesheet" href="../node_modules/talkiejs/dist/talkie-default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/monokai.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  </head>
  <body>
<template layout="title" invert type="text/x-markdown" backface="./img/cover.jpg" backface-filter="brightness(.5)">

# Web Components 2016 & Polymer v2

2016.10.09 [DevFest Tokyo 2016](http://gdg-tokyo.connpass.com/event/38927/) [@1000ch](http://twitter.com/1000ch)

</template>

<template layout="bullets" type="text/x-markdown">

## @1000ch

- æ ªå¼ä¼šç¤¾ã‚µã‚¤ãƒãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
- Web æŠ€è¡“ã¨ã‹ iOS ã¨ã‹ã„ã‚ã„ã‚
- [https://1000ch.net](https://1000ch.net) ã®äºº

</template>

<template layout="bullets" type="text/x-markdown">

## ã‚¢ã‚¸ã‚§ãƒ³ãƒ€

- Web Components ãŠã•ã‚‰ã„
- æœ€è¿‘ã® Web Components äº‹æƒ…
- Polymer v2 ãƒªãƒªãƒ¼ã‚¹

</template>

<template layout="title" invert type="text/x-markdown">

# Web Components<br>ãŠã•ã‚‰ã„

</template>

<template layout="title" invert type="text/x-markdown" backface="./img/battle.jpg" backface-filter="brightness(.75)">

## ã€ŒWeb ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã®é›£ã—ã•

ã€œ Web é–‹ç™ºè€…ãŒæˆ¦ã£ã¦ããŸã‚‚ã® ã€œ

</template>

<template layout="bullets" type="text/x-markdown">

## å†åˆ©ç”¨å¯èƒ½ãª Web ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

- ãã‚Œã‚’ **ä½œã‚‹é›£ã—ã•** ã¨ **ä½¿ã†ã‚³ã‚¹ãƒˆ**
- ç‰¹å®šã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¸ã®ä¾å­˜å•é¡Œ
- ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ãŒé†¸æˆã•ã‚Œãªã„å•é¡Œ
- å®¹èµ¦ãªãã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚’æ±šæŸ“ã™ã‚‹å•é¡Œ

</template>

<template layout="title" type="text/x-markdown">

## CSS ã ã‘ã¯ã©ã†ã«ã‚‚ãªã‚‰ãªã„

<blockquote class="twitter-tweet" data-lang="ja"><p lang="und" dir="ltr">(â•¯Â°â–¡Â°ï¼‰â•¯ï¸µ SSÆ†</p>&mdash; 1000ch (@1000ch) <a href="https://twitter.com/1000ch/status/752394739438137344">2016å¹´7æœˆ11æ—¥</a></blockquote>

CSS ã¯ã¤ã‚‰ã„ã€‚æœ¬å½“ã«ã¤ã‚‰ã„ã€‚

</template>

<template layout="bullets" type="text/x-markdown">

## Extensible Web ã®ä½“ç¾

- **Web æ¨™æº–ã‚’çµ„ã¿åˆã‚ã›ã¦å®Ÿç¾ã™ã‚‹ï¼ˆé‡è¦ï¼‰**
- ä½ãƒ¬ãƒ™ãƒ« API ã¯é«˜ãƒ¬ãƒ™ãƒ« API ã‚’å…¼ã­ã‚‹
- ã€ŒWeb ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã‚’ä½œã‚‹æ‰‹æ³•ãŒä¸€èˆ¬åŒ–ã•ã‚Œã‚‹

</template>

<template layout="bullets" type="text/x-markdown">

## Web Components<br>ã‚’æ”¯ãˆã‚‹æŠ€è¡“

- [Custom Elements](https://www.w3.org/TR/custom-elements/): æ–°ãŸãªè¦ç´ ã®å®šç¾©
- [Shadow DOM](https://www.w3.org/TR/shadow-dom/): éš”é›¢ã•ã‚ŒãŸ DOM ã‚¹ã‚³ãƒ¼ãƒ—
- [HTML Imports](https://www.w3.org/TR/html-imports/): æ–­ç‰‡åŒ–ã—ãŸ HTML ã®ãƒ­ãƒ¼ãƒ‰
- [Templates](https://www.w3.org/TR/html5/scripting-1.html#the-template-element): ä¸æ´»æ€§ãª HTML è¦ç´ 

</template>

<template layout="title" invert type="text/x-markdown">

# æœ€è¿‘ã® Web Components äº‹æƒ…

</template>

<template layout="title" type="text/x-markdown">

## Shadow DOM v1<br>ã¨<br>Custom Elements v1

ã“ã‚Œã¾ã§ã®ã‚‚ã®ã‚’ v0 ã€æ–°ãŸãªã‚‚ã®ã‚’ v1<br>ã¨ã—ã¦æ”¹ã‚ã¦ä»•æ§˜ã®ç­–å®šãŒé€²ã‚“ã§ã„ã‚‹

</template>

<template layout="bullets" type="text/x-markdown">

## Shadow DOM v1

- `createShadowRoot()` ã‹ã‚‰ `attachShadow()` ã¸
- Opened ãª Shadow DOM ã¨ Closed ãª Shadow DOM
- è¤‡æ•° `Shadow Root` ã®å»ƒæ­¢
- [Shadow Root ã‚’ãƒ›ã‚¹ãƒˆã§ãã‚‹è¦ç´ ãŒé™å®šçš„ã«](https://dom.spec.whatwg.org/#dom-element-attachshadow)
- `<content>` ã‹ã‚‰ `<slot>` ã¸

</template>

<template layout="code" type="text/x-markdown">

### `createShadowRoot()` ã‹ã‚‰ `attachShadow()` ã¸

```javascript
const div = document.querySelector('div');
const shadowRoot = div.attachShadow({
  mode: 'open' // or 'close'
});

// readonly ãª shadowRoot ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®è¿½åŠ 
console.log(div.shadowRoot);
```

å¼•æ•°ã« open ã‹ close ã‹ã©ã†ã‹ã‚’æŒ‡å®šã™ã‚‹ï¼ˆå¿…é ˆï¼‰

</template>

<template layout="title" type="text/x-markdown">

### Opened ãª Shadow DOM<br>ã¨<br>Closed ãª Shadow DOM

å¤–éƒ¨ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ Shadow DOM ã¨ã€ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ Shadow DOMã€‚

</template>

<template layout="title" type="text/x-markdown">

### è¤‡æ•° `Shadow Root` ã®å»ƒæ­¢

<blockquote>Though multiple shadow roots were originally introduced to support an Inheritance Model for components, Blink has already deprecated this feature even in v0. Do not use multiple shadow roots.</blockquote>

</template>

<template layout="title" type="text/x-markdown">

## [What's New in Shadow DOM v1 (by examples)](http://hayato.io/2016/shadowdomv1/)

æ›´ãªã‚‹è©³ç´°ã¯ã“ã¡ã‚‰ã®ç¥è³‡æ–™ã‚’å‚ç…§ã®ã“ã¨

</template>

<template layout="bullets" type="text/x-markdown">

## Custom Elements v1

- ES2015 class ãƒ™ãƒ¼ã‚¹ã®è¦ç´ å®šç¾©
- ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®è¦‹ç›´ã—
- `document.registerElement` ã‹ã‚‰ `window.customElements` ã¸

</template>

<template layout="code" type="text/x-markdown">

## Custom Elements v0

```html
<script>
  const FooElement = Object.create(HTMLElement.prototype);
  FooElement.createdCallback = () => { ... };
  FooElement.attachedCallback = () => { ... };
  FooElement.detachedCallback = () => { ... };
  FooElement.attributeChangedCallback = () => { ... };

  document.registerElement('foo-element', {
    prototype: FooElement
  });
</script>
```

</template>

<template layout="code" type="text/x-markdown">

## Custom Elements v1

```html
<script>
  class FooElement extends HTMLElement {
    constructor() { ... }
    connectedCallback() { ... }
    disconnectedCallback() { ... }
    attributeChangedCallback() { ... }
    adoptedCallback() { ... }
  }

  window.customElements.define('foo-element', FooElement);
</script>
```

</template>

<template layout="code" type="text/x-markdown">

## `window.customElements`

```javascript
// <foo-element> ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®å‚ç…§
const FooElement = customElements.get('foo-element');

// <foo-element> ãŒå®šç¾©ã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°
customElements.whenDefined('foo-element').then(() => {
  console.log('foo-element is defined');
});
```

</template>

<template layout="title" type="text/x-markdown">

## `is` å±æ€§ã®è¡Œæ–¹â€¦

WebKit ã¯ `<button is="foo-button" />` ã®ã‚ˆã†ãª [Custom Elements ã«ã‚ˆã‚‹ãƒã‚¤ãƒ†ã‚£ãƒ–è¦ç´ ã®æ‹¡å¼µã‚’ã—ãªã„æ–¹é‡](https://github.com/w3c/webcomponents/issues/509#issuecomment-233419167)ã‚’ä»Šã®ã¨ã“ã‚ç¤ºã—ã¦ã„ã‚‹

</template>

<template layout="bullets" type="text/x-markdown">

## HTML Imports ã©ã†ãªã£ãŸ

- [Mozilla ã¯ ES6 Modules ã‚’æ„è­˜ã—ã¦è¦‹é€ã£ã¦ã„ã‚‹](https://hacks.mozilla.org/2014/12/mozilla-and-web-components/)
    - [JavaScript Loader](https://github.com/whatwg/loader) ã‚ãŸã‚Šã®è©±
    - `<script type="module"></script>` ã®ã‚¢ã‚»ãƒƒãƒˆè§£æ±ºæ–¹æ³•
- [The state of Web Components](https://hacks.mozilla.org/2015/06/the-state-of-web-components/)

</template>

<template layout="bullets" invert backface="./img/webplatform.jpg" backface-filter="brightness(.25)" type="text/x-markdown">

## ãƒ–ãƒ©ã‚¦ã‚¶ã‚µãƒãƒ¼ãƒˆçŠ¶æ³

- **Shadow DOM v0**: Chrome, Firefox w/flag, Safari 10, Opera
- **Shadow DOM v1**: Chrome 53~, Opera 40~, Safari 10
- **Custom Elements v0**: Chrome, Firefox w/flag, Opera
- **Custom Elements v1**: Chrome 54~, Opera 41~
- **HTML Imports**: Chrome, Firefox w/flag, Opera
- **Templates**: Chrome, Firefox, Safari, Opera, Edge

</template>

<template layout="title" type="text/x-markdown">

## Safari 10 ã« Shadow DOM v1 ãŒå®Ÿè£…ã•ã‚ŒãŸ (â—)

</template>

<template layout="title" backface="./img/before.jpg" backface-filter="blur(1px) brightness(.8)"></template>

<template layout="title" type="text/x-markdown">

## Safari TP 14 ã« Shadow DOM v1 ãŒå®Ÿè£…ã•ã‚ŒãŸ (â—â—)

_ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã® Develop â†’ Experimental Features â†’ Custom Elements_

</template>

<template layout="title" backface="./img/after.jpg" backface-filter="blur(1px) brightness(.8)"></template>

<template layout="bullets" type="text/x-markdown">

## Safari ã®å®Ÿè£…ãŒé€²ã‚€ã®ã¯ã€é–‹ç™ºè€…ã«ã¨ã£ã¦ã‹ãªã‚Šå¤§ãã„

- ãƒ¢ãƒã‚¤ãƒ«ã§ã®åˆ©ç”¨ãŒã‹ãªã‚Šç¾å®Ÿçš„ã«ãªã£ã¦ããŸğŸ˜
- ã‚ã¨ã¯ Firefox ã¨ Edge ã‚’å¿œæ´ã™ã‚‹ã ã‘ğŸ‘†
- IE... (Â´ãƒ»Ï‰ãƒ»`).;:...(Â´ãƒ»Ï‰...:.;::..(Â´ãƒ»;::: .:.;: ...

</template>

<template layout="title" invert type="text/x-markdown">

# Polymer v2 ğŸ‰

<blockquote class="twitter-tweet" data-lang="ja"><p lang="en" dir="ltr">Polymer 2.0 is just starting to come together. For a very early look at what&#39;s coming, check out: <a href="https://t.co/w6U7L4I0OZ">https://t.co/w6U7L4I0OZ</a></p>&mdash; Polymer (@polymer) <a href="https://twitter.com/polymer/status/774379113666654208">2016å¹´9æœˆ9æ—¥</a></blockquote>

</template>

<template layout="bullets" type="text/x-markdown">

## Polymer v2 ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

- Web Components "v1" ã®æ©Ÿèƒ½ã®ãƒ•ãƒ«ã‚µãƒãƒ¼ãƒˆ
- Polymer v1.x ã‹ã‚‰ã®ã‚¹ãƒ ãƒ¼ã‚¹ãªãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- æ¨™æº–ã«ããã‚ãªã„ "leaky" ãªæŠ½è±¡åŒ–ã‚’æ’é™¤
- Polymer å†…éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚·ã‚¹ãƒ†ãƒ ã®æ”¹å–„

</template>

<template layout="code" type="text/x-markdown">

## Polymer v2

```javascript
class MyElement extends Polymer.Element {
  static get is() { return 'my-element'; }
  static get config() {
    return { /* properties, observers meta data */ };
  }
  constructor() { super(); }
  connectedCallback() { super.connectedCallback(); }
}

customElements.define(MyElement.is, MyElement);
```

</template>

<template layout="title" type="text/x-markdown">

## Polymer v1.x ã®<br>API ã‚‚ä¸€å¿œä½¿ãˆã‚‹

`polymer.html` ãŒå¼•ãç¶šãæä¾›ã•ã‚Œã€`Polymer.dom()` ã‚„ `Polymer.CompatElement` ã¨ã„ã£ãŸ Polymer v1.x ã§æä¾›ã•ã‚Œã¦ããŸ API ã‚‚å«ã¾ã‚Œã‚‹ã€‚

</template>

<template layout="title" type="text/x-markdown">

## ãƒã‚¤ãƒ†ã‚£ãƒ– API ã¸<br>ç§»è¡Œã‚’å¼·ãæ¨å¥¨

Polymer ã§æŠ½è±¡åŒ–ã—ã¦ããŸ API ãŒæ’é™¤ã•ã‚Œãƒã‚¤ãƒ†ã‚£ãƒ–ã® API ã‚’ä½¿ã†ã‚ˆã†ã«ã€‚ä¾‹ãˆã°ã€[Shady DOM v1](https://github.com/webcomponents/shadydom)ãŒæä¾›ã•ã‚Œã‚‹ã“ã¨ã§ DOM æ“ä½œã«é–¢ã—ã¦ã‚‚ `Polymer.dom()` ãŒä¸è¦ã«ãªã‚‹ã€‚

</template>

<template layout="bullets" type="text/x-markdown">

## Polymer v1.x ã®æ©Ÿèƒ½ã¯å¼•ãç¶šãæä¾›ã•ã‚Œã‚‹ãŒâ€¦

</template>

<template layout="code" type="text/x-markdown">

## Type Extension ã®<br>é›²è¡ŒããŒæ€ªã—ã„ã®ã§â€¦

```html
<template is="dom-repeat" items="{{items}}">
  ...
</template>

<style is="custom-style">
  ...
</style>
```

</template>

<template layout="code" type="text/x-markdown">

## Polymer ã§ã‚‚éã‚µãƒãƒ¼ãƒˆ `is="dom-repeat"` ãªã©ã¯è¦ä¿®æ­£

```html
<dom-repeat items="{{items}}">
  <template>...</template>
</dom-repeat>

<custom-style>
  <style>...</style>
</custom-style>
```

</template>

<template layout="title" invert type="text/x-markdown">

<blockquote class="twitter-tweet" data-lang="ja"><p lang="en" dir="ltr">Polymer Summit 2016 registration is now open! Join us in London on October 17-18. <a href="https://t.co/gWSEOpy3Sb">https://t.co/gWSEOpy3Sb</a> <a href="https://t.co/Noj4kAsdqd">pic.twitter.com/Noj4kAsdqd</a></p>&mdash; Polymer (@polymer) <a href="https://twitter.com/polymer/status/765254100300603393">2016å¹´8æœˆ15æ—¥</a></blockquote>

[Polymer Summit 2016](https://www.polymer-project.org/summit/) in London on October 17-18

</template>

<template layout="cover" type="text/x-markdown"></template>
<template layout="title" type="text/x-markdown"></template>
<template layout="bullets" type="text/x-markdown"></template>
<template layout="code" type="text/x-markdown"></template>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../node_modules/talkiejs/dist/talkie.min.js"></script>
    <script>
      Talkie({
        wide         : false,
        control      : true,
        pointer      : true,
        progress     : true,
        backface     : true,
        notransition : true
      });
    </script>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  </body>
</html>
