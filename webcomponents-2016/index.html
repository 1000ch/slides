<!doctype html>
<html>
  <head>
    <title>Web Components 2016 & Polymer v2</title>
    <link rel="stylesheet" href="../node_modules/talkiejs/dist/talkie.min.css">
    <link rel="stylesheet" href="../node_modules/talkiejs/dist/talkie-default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/monokai.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  </head>
  <body>
<template layout="title" type="text/x-markdown">

# Web Components 2016 & Polymer v2

2016.10.09 [DevFest Tokyo 2016](http://gdg-tokyo.connpass.com/event/38927/) [@1000ch](http://twitter.com/1000ch)

</template>

<template layout="bullets" type="text/x-markdown">

## @1000ch

- æ ªå¼ä¼šç¤¾ã‚µã‚¤ãƒãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
- Web æŠ€è¡“ã¨ã‹ iOS ã¨ã‹ã„ã‚ã„ã‚
- [https://1000ch.net](https://1000ch.net) ã®äºº

</template>

<template layout="bullets" type="text/x-markdown">

## ã‚¢ã‚¸ã‚§ãƒ³ãƒ€

- Web Components ãŠã•ã‚‰ã„
- æœ€è¿‘ã® Web Components äº‹æƒ…
- Polymer v2 ãƒªãƒªãƒ¼ã‚¹

</template>

<template layout="title" invert type="text/x-markdown">

# Web Components<br>ãŠã•ã‚‰ã„

</template>

<template layout="bullets" type="text/x-markdown">

## ã€Œå†åˆ©ç”¨å¯èƒ½ãª Web ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã®é›£ã—ã•

- ãã‚Œã‚’ **ä½œã‚‹** ã‚³ã‚¹ãƒˆã¨ **ä½¿ã†** ã‚³ã‚¹ãƒˆ
- ç‰¹å®šã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¸ã®ä¾å­˜å•é¡Œ
- ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ãŒé†¸æˆã•ã‚Œãªã„å•é¡Œ
- CSS ã¯å®¹èµ¦ãªãã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚’æ±šæŸ“ã™ã‚‹å•é¡Œ

</template>

<template layout="bullets" type="text/x-markdown">

## Extensible Web ã®ä½“ç¾

- Web æ¨™æº–æŠ€è¡“ã‚’çµ„ã¿åˆã‚ã›ã¦æ§‹æˆã™ã‚‹ï¼ˆé‡è¦ï¼‰
- ä½ãƒ¬ãƒ™ãƒ« API ã¯é«˜ãƒ¬ãƒ™ãƒ« API ã‚’å…¼ã­ã‚‹
- **ã€ŒWeb ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã‚’ä½œã‚‹æ‰‹æ³•ãŒä¸€èˆ¬åŒ–** ã•ã‚Œã‚‹

</template>

<template layout="bullets" type="text/x-markdown">

## Web Components ã‚’æ”¯ãˆã‚‹æŠ€è¡“

- **Custom Elements**: æ–°ãŸãªè¦ç´ ã®å®šç¾©
- **Shadow DOM**: éš”é›¢ã•ã‚ŒãŸ DOM ã‚¹ã‚³ãƒ¼ãƒ—
- **HTML Imports**: æ–­ç‰‡åŒ–ã—ãŸ HTML ã®ãƒ­ãƒ¼ãƒ‰
- **Templates**: ä¸æ´»æ€§ãª HTML è¦ç´ 

</template>

<template layout="title" invert type="text/x-markdown">

# æœ€è¿‘ã® Web Components äº‹æƒ…

</template>

<template layout="bullets" type="text/x-markdown">

## Shadow DOM v1

- `createShadowRoot()` ã‹ã‚‰ `attachShadow()` ã¸
- readonly ãª `shadowRoot` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
- è¤‡æ•° `Shadow Root` ã®å»ƒæ­¢
- Opened ãª Shadow DOM ã¨ Closed ãª Shadow DOM
    - `/deep/` ã¨ `::shadow` ã®å»ƒæ­¢
- [Shadow Root ã‚’ãƒ›ã‚¹ãƒˆã§ãã‚‹è¦ç´ ãŒé™å®šçš„ã«](https://dom.spec.whatwg.org/#dom-element-attachshadow)
- `<content>` ã‹ã‚‰ `<slot>` ã¸
    - `::content .foo` ã‹ã‚‰ `::slotted(.foo)` ã¸

</template>

<template layout="bullets" type="text/x-markdown">

## Custom Elements v1

- ES2015 class ãƒ™ãƒ¼ã‚¹ã®è¦ç´ å®šç¾©
- ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®è¦‹ç›´ã—
    - `constructor` (former: `createdCallback`)
    - `connectedCallback` (former: `attachedCallback`)
    - `disconnectedCallback` (former: `detachedCallback`)
    - `attributeChangedCallback`ã€€(+ `observedAttributes`)
    - `adoptedCallback`: è¦ç´ ãŒæ–°ãŸãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ç§»å‹•ã—ãŸæ™‚
- `document.registerElement` ã‹ã‚‰ `window.customElements` ã¸
    - `customElements.get('foo-element')`
    - `customElements.whenDefined('foo-element').then(...)`

</template>

<template layout="code" type="text/x-markdown">

## Custom Elements v0

```html
<script>
  const FooElement = Object.create(HTMLElement.prototype);

  FooElement.createdCallback = () => { ... };
  FooElement.attachedCallback = () => { ... };
  FooElement.detachedCallback = () => { ... };
  FooElement.attributeChangedCallback = () => { ... };

  document.registerElement('foo-element', {
    prototype: FooElement
  });
</script>
```

</template>

<template layout="code" type="text/x-markdown">

## Custom Elements v1

```html
<script>
  class FooElement extends HTMLElement {
    constructor() { ... }
    connectedCallback() { ... }
    disconnectedCallback() { ... }
    attributeChangedCallback() { ... }
    adoptedCallback() { ... }
  }

  window.customElements.define('foo-element', FooElement);
</script>
```

</template>

<template layout="bullets" type="text/x-markdown">

## HTML Imports ã©ã†ãªã£ãŸ

- [Mozilla ã¯ ES6 Modules ã‚’æ„è­˜ã—ã¦è¦‹é€ã£ã¦ã„ã‚‹](https://hacks.mozilla.org/2014/12/mozilla-and-web-components/)
    - [JavaScript Loader](https://github.com/whatwg/loader)
    - `<script type="module"></script>` ã®ã‚¢ã‚»ãƒƒãƒˆè§£æ±ºæ–¹æ³•
- [The state of Web Components](https://hacks.mozilla.org/2015/06/the-state-of-web-components/)

</template>

<template layout="bullets" type="text/x-markdown">

## ãƒ–ãƒ©ã‚¦ã‚¶ã‚µãƒãƒ¼ãƒˆçŠ¶æ³

- **Shadow DOM v0**: Chrome, Firefox (w/flag), Safari 10, Opera
- **Shadow DOM v1**: Chrome 53~, Opera 40~, Safari 10~ (+iOS)
- **Custom Elements v0**: Chrome, Firefox (w/flag), Opera
- **Custom Elements v1**: Chrome 54~, Opera 41~
- **Templates**: Chrome, Firefox, Safari, Opera, Edge

</template>

<template layout="title" invert type="text/x-markdown">

# Polymer v2 ğŸ‰

</template>

<template layout="bullets" type="text/x-markdown">

## Polymer v2 ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

- Web Components "v1" ã®æ©Ÿèƒ½ã®ãƒ•ãƒ«ã‚µãƒãƒ¼ãƒˆ
    - ãƒã‚¤ãƒ†ã‚£ãƒ–ã¨åŒæ§˜ ES2015 class ãƒ™ãƒ¼ã‚¹ã®ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã®å®šç¾©
- Polymer v1 ã‹ã‚‰ã®ã‚¹ãƒ ãƒ¼ã‚¹ãªãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
    - Polymer v1 ã§æä¾›ã•ã‚Œã¦ã„ãŸ `polymer.html` ãŒå¼•ãç¶šãæä¾›ã•ã‚Œã‚‹
    - `Polymer.CompatElement` ãªã©
- æ¨™æº–ã«ããã‚ãªã„ "leaky" ãªæŠ½è±¡åŒ–ã‚’æ’é™¤
    - `Polymer.dom()` ã‚„ `notifyPath` ãªã©
- Polymer å†…éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚·ã‚¹ãƒ†ãƒ ã‚„ãƒãƒªãƒ•ã‚£ãƒ«ã®æ”¹å–„
    - Shady DOM ã¯ `webcomponentsjs` ã¸
    - `Polymer.Element` ã§ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã‚’å®šç¾©

</template>

<template layout="code" type="text/x-markdown">

## Polymer v2

```javascript
class MyElement extends Polymer.Element {
  static get is() { return 'my-element'; }
  static get config() {
    return {
      /* properties, observers meta data */
    };
  }
  constructor() { super(); }
  connectedCallback() { super.connectedCallback(); }
  ...
}

customElements.define(MyElement.is, MyElement);
```

</template>

<template layout="title" type="text/x-markdown"></template>
<template layout="bullets" type="text/x-markdown"></template>
<template layout="code" type="text/x-markdown"></template>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../node_modules/talkiejs/dist/talkie.min.js"></script>
    <script>
      Talkie({
        wide         : false,
        control      : true,
        pointer      : true,
        progress     : true,
        backface     : true,
        notransition : true
      });
    </script>
  </body>
</html>
