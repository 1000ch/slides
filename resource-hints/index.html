<!doctype html>
<html>
  <head>
    <title>Introduction to Resource Hints</title>
    <link rel="stylesheet" href="../asset/talkie.min.css">
    <link rel="stylesheet" href="../asset/talkie-default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/monokai.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body>
<template layout="title" invert type="text/x-markdown" backface="img/cover.jpg" backface-filter="brightness(.5)">

# Introduction to Resource Hints

2016.12.05 [Frontrend Vol.8](https://frontrend.connpass.com/event/45238/) [@1000ch](http://twitter.com/1000ch)

</template>

<template layout="bullets" type="text/x-markdown">

## @1000ch

- æ ªå¼ä¼šç¤¾ã‚µã‚¤ãƒãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
- Web æŠ€è¡“ã¨ã‹ iOS ã¨ã‹ã„ã‚ã„ã‚
- [https://1000ch.net](https://1000ch.net) ã®äºº

</template>

<template layout="title" invert type="text/x-markdown" backface="img/cat-reading.gif" backface-filter="brightness(.5)">

## Resouce Hints ã¨ã¯

ã“ã‚Œã‹ã‚‰å¿…è¦ã«ãªã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚’ `<link>` è¦ç´ ã§å®šç¾©ã—ã€ãã‚Œã‚’ãƒ–ãƒ©ã‚¦ã‚¶ãŒ **æŠ•æ©Ÿçš„ã«** å–å¾—ã™ã‚‹æ©Ÿèƒ½

</template>

<template layout="title" type="text/x-markdown">

# æŠ•æ©Ÿçš„ã«ï¼Ÿ

</template>

<template layout="title" invert type="text/x-markdown" backface="img/cat-jumping.gif" backface-filter="brightness(.5)">

## ã€Œæˆå¦ã¯ç¢ºå®Ÿã§ãªã„ãŒã€æ©Ÿä¼šã‚’ä¸Šæ‰‹ãåˆ©ç”¨ã—ã¦åˆ©ç›Šã‚’å¾—ã‚ˆã†ã¨ã™ã‚‹è¡Œç‚ºã‚’å½¢å®¹ã™ã‚‹ã€‚ã€

ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰ã‚’é‚ªé­”ã—ãªã„ã‚ˆã†ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒã‚¢ã‚¤ãƒ‰ãƒ«ã®æ™‚ã«å¿…è¦ã«ãªã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚‚ã‚‰ã†

</template>

<template layout="title" type="text/x-markdown">

## [Resouce Hints](https://w3c.github.io/resource-hints/)

- [DNS Prefetch](https://w3c.github.io/resource-hints/#dns-prefetch): æŠ•æ©Ÿçš„ãª DNS è§£æ±º
- [Preconnect](https://w3c.github.io/resource-hints/#preconnect): æŠ•æ©Ÿçš„ãª TCP æ¥ç¶š
- [Prefetch](https://w3c.github.io/resource-hints/#prefetch): æŠ•æ©Ÿçš„ãªãƒªã‚½ãƒ¼ã‚¹å–å¾—
- [Prerender](https://w3c.github.io/resource-hints/#prerender): æŠ•æ©Ÿçš„ãªãƒšãƒ¼ã‚¸æç”»

</template>

<template layout="code" invert type="text/x-markdown">

## DNS Prefetch

```html
<link rel="dns-prefetch" href="//example.com">
```

- æŒ‡å®šã—ãŸã‚ªãƒªã‚¸ãƒ³ã¸ã® DNS è§£æ±ºã‚’è¡Œã†
- ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒã‚ã‹ã‚‹ãŒã€ã‚¹ã‚­ãƒ¼ãƒãŒå®šã¾ã‚‰ãªã„å ´åˆã«ä½¿ã†

</template>

<template layout="code" invert type="text/x-markdown">

## Preconnect

```html
<link rel="preconnect" href="//example.com">
<link rel="preconnect" href="//cdn.example.com" crossorigin>
```

- æŒ‡å®šã—ãŸã‚ªãƒªã‚¸ãƒ³ã¸ã® DNS è§£æ±ºã‚’å«ã‚€ TCP æ¥ç¶šã‚’è¡Œã†
- ãƒ‰ãƒ¡ã‚¤ãƒ³åŠã³ã‚¹ã‚­ãƒ¼ãƒãŒã‚ã‹ã£ã¦ã„ã‚‹å ´åˆã«ä½¿ã†

</template>

<template layout="code" invert type="text/x-markdown">

## Prefetch

```html
<link rel="prefetch" href="//example.com/next-page.html" as="html" crossorigin="use-credentials">
<link rel="prefetch" href="/library.js" as="script">
```

- æŒ‡å®šã—ãŸ URL ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’å–å¾—ã™ã‚‹
- `as` ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã ãŒã€ä»˜ã‘ã¦ãŠãã¨è‰¯ã„

</template>

<template layout="bullets" type="text/x-markdown">

## Preload directive

- **(none)**: XHR, fetch	`link rel=preload href=...`
- **media**: `audio`, `video`
- **script**: `script`, importScripts ã® script
- **style**: `link rel="stylesheet"`, CSS ã® `@import`
- **font**: CSS ã® `@font-face`
- **image**: `img`, `picture`, `srcset`, CSS ã® `-image`

ä»–ã«ã¯ `worker`, `embed`, `object`, `documenet` ãªã©

</template>

<template layout="code" invert type="text/x-markdown">

## Prerender

```html
<link rel="prerender" href="//example.com/next-page.html">
```

- æŒ‡å®šã—ãŸ URL ã® HTML ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å–å¾—åŠã³è©•ä¾¡ã‚’è¡Œã†
- æç”»ã¾ã§å®Ÿè¡Œã™ã‚‹ã®ã§ã€é«˜é€Ÿã«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã•ã‚Œã‚‹
- ã‚³ã‚¹ãƒˆã‚‚å¤§ãã„ã®ã§ã€æ¬¡ã«ç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ã®é«˜ã„ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾ã—ã¦å®Ÿæ–½ã™ã‚‹ã¨è‰¯ã„

</template>

<template layout="code" invert type="text/x-markdown">

## Hint probability

```html
<link rel="dns-prefetch" href="//widget.com" pr="0.75">
<link rel="preconnect" href="//cdn.example.com" pr="0.42">
<link rel="prefetch" href="//example.com/next-page.html" pr="0.75">
<link rel="prerender" href="//example.com/thankyou.html" pr="0.25">
```

- ãƒªã‚½ãƒ¼ã‚¹ã®å„ªå…ˆåº¦ã‚’ `pr` å±æ€§ã« `0.0~1.0` ã§æŒ‡å®šã™ã‚‹

</template>

<template layout="title" type="text/x-markdown">

## ğŸ‘† ãƒã‚¤ã‚³ã‚¹ãƒˆãƒã‚¤ãƒªã‚¿ãƒ¼ãƒ³

- `prerender`: äºˆã‚æ±ºã¾ã£ãŸé·ç§»ã€ãƒ—ãƒ©ã‚¤ãƒãƒªãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- `prefetch`: ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªCSS/JSã€ã‚­ãƒ¼ã¨ãªã‚‹ãƒ¡ãƒ‡ã‚£ã‚¢
- `preconnect`: åˆ¥ãƒ‰ãƒ¡ã‚¤ãƒ³ã®APIã‚µãƒ¼ãƒãƒ¼ã‚„CDN
- `dns-prefetch`: åŒä¸Š

## ğŸ‘‡ ãƒ­ãƒ¼ã‚³ã‚¹ãƒˆãƒ­ãƒ¼ãƒªã‚¿ãƒ¼ãƒ³

</template>

<template layout="title" type="text/x-markdown">

## Chrome ã® Prerender History

[`chrome://net-internals/#prerender`](chrome://net-internals/#prerender)

</template>

<template layout="code" invert type="text/x-markdown">

## Try in your browser?

```javascript
const link = document.createElement('link');
link.rel = 'prerender';
link.href = document.querySelector('a').href;
document.head.appendChild(link);
```

</template>

<template layout="cover" type="text/x-markdown">

## ãŠã—ã¾ã„

[@1000ch](http://twitter.com/1000ch)

</template>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../asset/talkie.min.js"></script>
    <script>
      Talkie({
        wide         : false,
        control      : true,
        pointer      : true,
        progress     : true,
        backface     : true,
        notransition : true
      });
    </script>
  </body>
</html>
